<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>index</title>
    <script type="text/javascript" src="synthesizer.js"></script>
  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      var app = Elm.Synthesizer.fullscreen()
      var context = new AudioContext();

      var osc = context.createOscillator();
      var vol = context.createGain();

      osc.connect(vol);
      vol.connect(context.destination);

      // since frequency will be set by default
      // and oscillator will always be playing, and
      // we dont want to listen it, just turn off volume

      vol.gain.value = 0;
      osc.start();

      app.ports.play.subscribe(function (frequency) {
        osc.frequency.value = frequency;
        vol.gain.value = 1;
      });

      app.ports.stop.subscribe(function () {
        vol.gain.value = 0;
      });
    </script>
  </body>
</html>
